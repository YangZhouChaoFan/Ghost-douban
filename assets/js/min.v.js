/*! ghostwill 2014-05-03 */
function checkKey(a){a=a||window.event,"74"==a.keyCode?($("html,body").stop(),$("html,body").animate({scrollTop:$(window).stop().scrollTop()+200},"fast")):"75"==a.keyCode&&($("html,body").stop(),$("html,body").animate({scrollTop:$(window).stop().scrollTop()-200},"fast"))}function cleanMask(){$(".post-header-mask").css("opacity","0")}function checkImg(a){var b,c,d=!1;return 1!=$(a).hasClass("wrap")?void console.log("不满足wrap"):(d=!0,console.log("wrap标记"),void $("<img/>").attr("src",$(a).attr("src")).load(function(){b=this.width,c=this.height,1==d&&visualContainerWidh>800&&b>900&&b>contentWidth&&($(a).css({width:visualContainerWidh,"margin-left":-(visualContainerWidh-contentWidth)/2,"max-width":visualContainerWidh}),$(a).addClass("imgWrapOut"))}))}function urlIconlize(a){var b,c,d={twitter:"icon-twitter",qzone:"icon-qzone",weibo:"icon-weibo",facebook:"icon-facebook",github:"icon-github",douban:"icon-douban",google:"icon-google",luolei:"icon-luolei",dribble:"icon-dribble"};for(var e in d)if("function"!=typeof d[e]){var f=e;a.indexOf(f)>=0&&(b=f,c=d[f])}return c}function isSiteDomain(){}var _siteDomain="luolei.org",duoshuoTrans=window.location.pathname;$(".ds-thread").attr("data-url","http://blog.luolei.org"+duoshuoTrans),document.onkeydown=checkKey,$(".post-cover-info").hover(function(){console.log("清楚遮罩"),cleanMask()});var visualContainerWidh=$(window).width(),contentWidth=$(".post-content").width();if($(".post-image p").each(function(){var a=$(this);""==a.html()&&a.closest(".post-excerpt").children(".excerpt-word").show()}),$(".single-post-inner img").each(function(){var a=$(this);"wrap"==a.attr("alt")==1&&a.addClass("wrap"),checkImg(a)}),$(".single-post-inner iframe, .single-post-inner frame, .single-post-inner video ").each(function(){var a=$(this),b=a.attr("width"),c=a.attr("height");scaleRatio=b/c,a.hasClass("wrap")&&visualContainerWidh>800&&a.css({width:visualContainerWidh,"margin-left":-(visualContainerWidh-contentWidth)/2,"max-width":visualContainerWidh,height:visualContainerWidh/scaleRatio})}),$(".single-post-inner img").length>0)if($('.single-post-inner img[alt="cover-image"]').length>0)mainImage=$('img[alt="cover-image"]:first'),mainImageSource=mainImage.attr("src"),$(".site-head").css("background-image","url("+mainImageSource+")"),mainImage.remove();else{$(".single-post-inner img:first").attr("alt","cover-image");var firstImgWidth=$(".single-post-inner img:first").width();console.log(firstImgWidth),$(".single-post-inner img:first").attr("alt","cover-image"),mainImage=$('img[alt="cover-image"]'),mainImageSource=mainImage.attr("src"),$(".site-head").css("background-image","url("+mainImageSource+")"),mainImage.remove()}$("body").is(".home-template")&&$(".post-in-list").each(function(){$(this).find("img:gt(0)").css("display","none"),$(this).find("pre").css("display","none")}),$(".post-excerpt .post-title").each(function(){$(this).hover(function(){console.log("出现");$(this)},function(){console.log("消失");$(this)})}),$(window).resize(function(){visualContainerWidh=$(window).width(),$(".single-post-inner img").each(function(){var a=$(this);checkImg(a)})}),$(".post-meta .post-tags").each(function(){var a=$(this);0==a.children().length&&a.addClass("hidden")});var searchField=$(".search-form-input").ghostHunter({results:".quick-search",onKeyUp:!0,result_template:"<a  class='searchResult' href='{{link}}'>{{title}}</a>",info_template:"<h4>找到{{amount}}篇相关的文章</h4>",rss:"/rss",zeroResultsInfo:!1});$(".search-form-input").focus(function(){$(".search-bar-result").css({visibility:"visible",opacity:"1"})}),$(".search-form-input").blur(function(){$(".search-bar-result").css({visibility:"hidden",opacity:"0"})}),$(document).ready(function(){$(".single-post-inner p a:not(:has(img))").each(function(){var a=$(this).attr("href"),b=document.createElement("a");b.href=a,_selfDomain=b.hostname,urlIconlize(_selfDomain),console.log(_selfDomain),$(this).prepend('<i class="iconfont '+urlIconlize(_selfDomain)+'"></i>');var c=$(this).find("i").css("color"),d=$(this).css("color");$(this).hover(function(){$(this).css("color",c),$(this).addClass("animated pulse")},function(){$(this).css("color",d),$(this).removeClass("animated pulse")})}),$(".post-cover-info").addClass("animated fadeInDownBig"),$(".post-template").ready(function(){console.log("文章页面加载完毕")}),$(window).stellar();var a="我要飞到最高",b=$(window).height();$(".cover-slide-more").click(function(){return $("html,body").animate({scrollTop:b},500),!1}),$(".cover-slide-more").hover(function(){cleanMask(),$(this).addClass("hoverLight"),$(".post-cover-info").addClass("animated fadeOutUp"),$(".cover-slide-more h4").show().addClass("animated fadeInDown")},function(){console.log("重现"),$(this).removeClass("hoverLight"),$(".post-cover-info").removeClass("fadeOutUp"),$(".post-cover-info").addClass("fadeInDown"),$(".cover-slide-more h4").hide()}),$(function(){var c=$('<a href="#" id="to-top" title="'+a+'">↑</a>').appendTo("body");$(window).scroll(function(){$(window).scrollTop()>$(window).height()?c.fadeIn(500):c.fadeOut(500)}),c.click(function(a){a.preventDefault(),$("html,body").animate({scrollTop:b-100},1e3,function(){window.location.hash="#"}),console.log("我跳")})})});